$black-color: #000;
$white-color: #fff;
$brand-color: #FFED00;

$std-spacing: 1em;

$rotation: -15deg;
$container-width: 75em;
$nav-height: 9em;
$nav-margin-left: 17.25em;
$skewed-line-width: 1.5 * $std-spacing;
$hero-image-bottom-cut: 50px;

$transition: .25s ease-in-out;

@mixin dark-box() {
    background-color: $black-color;
    color: $white-color;
}

@mixin skewed-line() {
    content: '';
    position: absolute;
    width: $skewed-line-width;

    transform: skewX($rotation);
    background-color: $brand-color;
}

* {
    box-sizing: border-box;
}

body {
    font-size: calc(.8em + 1vw);
    font-family: 'Exo 2', sans-serif;

    > .container:after { // bottom pictograms bar
        content: '';
        display: block;
        width: 100%;
        height: 4em;

        padding-bottom: $std-spacing;
        background: url(assets/footer-bar.svg) repeat-x left 0;
        background-size: contain;
    }
}

.container {
    max-width: $container-width;
    margin: 0 auto;
    position: relative;
}

header {
    overflow: hidden;

    h1 {
        float: left;
        margin: .5 * $std-spacing .5 * $std-spacing 0;

        a {
            display: inline-block;
            text-indent: 100%;
            white-space: nowrap;
            overflow: hidden;
            background: url(assets/logo.svg) no-repeat;
            width: 182px;
            height: 159px;
        }
    }
}

nav {
    width: 100%;
    height: $nav-height;

    margin-left: $nav-margin-left;
    padding: 3 * $std-spacing $std-spacing;
    
    transform: skewX($rotation);
    transform-origin: top;
    transition: $transition height;
    @include dark-box();

    ul {
        opacity: 0;
        padding: 0;
        margin: 2.5 * $std-spacing 0 0 .5 * $std-spacing;
        transform: skewX(-$rotation);
        transition: $transition opacity;
    }

    .item {
        list-style: none;

        a {
            display: inline-block;

            color: $white-color;
            padding: $std-spacing 0;
            text-decoration: none;
            text-transform: uppercase;
        }
        &.active a {
            color: $brand-color;
        }
    }

    &.expanded {
        width: 100%;
        height: 100vh;

        ul {
            opacity: 1;
        }
    }
}

#nav-icon {
    $base-size: 2.5em;

    width: $base-size;
    height: .75 * $base-size;
    position: relative;

    margin-top: 2em;

    transform: rotate(0deg) skewX(-$rotation);
    transition: .5s ease-in-out;
    cursor: pointer;

    span {
        display: block;
        position: absolute;
        height: .12 * $base-size;
        width: 100%;
        background: $white-color;
        border-radius: .12 * $base-size;
        opacity: 1;
        left: 0;
        transform: rotate(0deg);
        transition: $transition;
    
        &:nth-child(1) {
            top: 0px;
            transform-origin: left center;
        }

        &:nth-child(2) {
            top: .3 * $base-size;
            transform-origin: left center;
        }

        &:nth-child(3) {
            top: .6 * $base-size;
            transform-origin: left center;
        }
    }

    .expanded & span {
        &:nth-child(1) {
            transform: rotate(45deg);
            top: -.07 * $base-size;
            left: .13 * $base-size;
        }

        &:nth-child(2) {
            width: 0%;
            opacity: 0;
        }

        &:nth-child(3) {
            transform: rotate(-45deg);
            top: .65 * $base-size;
            left: .13 * $base-size;
        }
    }
}

section {
    clear: both;
    min-height: 24em;
    padding: 0 3 * $std-spacing $std-spacing;

    &:before { // long yellow skewed bar
        @include skewed-line();

        top: 0;
        left: $nav-margin-left - $skewed-line-width;
        z-index: -1;

        height: 100%;
        transform-origin: top;
    }

    main {
        :first-child {
            margin-top: 0;
        }
    }
}

.hero-image {
    $padding: 6 * $std-spacing;

    float: left;
    position: relative;
    height: calc(100vw - #{$padding} - #{$hero-image-bottom-cut});
    margin-bottom: $hero-image-bottom-cut;
    overflow: hidden;

    > * {
        width: calc(100vw - #{$padding});
        height: calc(100vw - #{$padding});
        border-radius: 50%;
    }
}

footer {
    width: 100%;
    clear: both;
    
    .container {
        padding: $std-spacing;
        padding-left: 6em;
    }

    .outer {
        padding: $std-spacing;
        @include dark-box();
    }
}

@media (min-width: 374px) {
    nav {
        padding: 3em 2em;
    }

    #nav-icon {
        margin-top: $std-spacing;
    }
}

@media (min-width: 767px) {
    body {
        font-size: 1em;

        &:before { // full-width to the right black background behind nav
            content: '';
            position: absolute;
            top: 0;
            right: 0;
            height: $nav-height;
            border-right: 50vw solid $black-color;
        }

        > .container:after { // bottom pictograms bar
            $left-shift: 8.6em;

            width: calc(100% - #{$left-shift});
            height: 8em;
            margin-bottom: 0;
            margin-left: $left-shift;

            background-size: initial;
            background-position-y: 1em;
        }
    }

    nav {
        width: calc(100% - #{$nav-margin-left} + #{4 * $std-spacing});

        ul {
            opacity: 1;
            float: right;
            margin: 0 2em;
        }

        .item {
            display: inline-block;
            border-right: 3px solid $brand-color;

            a {
                padding: $std-spacing 2 * $std-spacing;
            }

            &:last-child {
                border-right: none;
            }
        }
    }

    #nav-icon {
        display: none;
    }

    .hero-image {
        $size: 350px;

        margin: 0 3 * $std-spacing $hero-image-bottom-cut 0;
        height: $size - $hero-image-bottom-cut;
        
        > * {
            width: $size;
            height: $size;
        }
    }

    footer .container:before {
        @include skewed-line();

        bottom: -1em;
        left: 3em;
        z-index: 100;

        height: 20em;
        transform-origin: bottom;
    }
}

@media (min-width: 1025px) {
    .hero-image {
        $size: 450px;

        height: $size - $hero-image-bottom-cut;
        
        > * {
            width: $size;
            height: $size;
        }
    }

    footer .container {
        padding-left: 8em;

        &:before {
            left: 4em;
        }
    }
}